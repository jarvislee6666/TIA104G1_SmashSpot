<!DOCTYPE html>
<html lang="zh-Hant" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register</title>
    <!-- 修改靜態資源引用 -->
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.2/css/bootstrap.min.css}" />
    <link rel="stylesheet" th:href="@{/webjars/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css}" />
    <link rel="stylesheet" th:href="@{/webjars/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css}" />
    <link rel="stylesheet" th:href="@{/css/style.css}" /> <!-- 將原有的 style 移到獨立的 CSS 文件 -->
</head>
<body class="bg-light">
    <!-- Header -->
    <header th:replace="~{fragments/header :: header}"></header>

    <main>
        <div class="container">
            <div class="register-container">
                <h2 class="register-title">會員註冊</h2>
                <!-- 添加 Thymeleaf 表單處理 -->
                <form id="registerForm" th:action="@{/auth/register}" method="post" th:object="${registerForm}">
                    <!-- 添加錯誤訊息顯示 -->
                    <div th:if="${error}" class="alert alert-danger" role="alert" th:text="${error}">
                    </div>

                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" th:field="*{email}" required />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
                    </div>

                    <div class="mb-3">
                        <label for="name" class="form-label">姓名</label>
                        <input type="text" class="form-control" id="name" th:field="*{name}" required />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
                    </div>

                    <div class="mb-3">
                        <label for="phone" class="form-label">手機</label>
                        <input type="tel" class="form-control" id="phone" th:field="*{phone}" pattern="[0-9]{10}" required />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></div>
                    </div>

                    <div class="mb-3">
                        <label for="birthday" class="form-label">生日</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="birthday" th:field="*{birthday}" readonly required />
                            <span class="input-group-text">
                                <i class="bi bi-calendar"></i>
                            </span>
                        </div>
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('birthday')}" th:errors="*{birthday}"></div>
                    </div>

                    <div class="mb-3">
                        <label for="address" class="form-label">地址</label>
                        <input type="text" class="form-control" id="address" th:field="*{address}" required />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('address')}" th:errors="*{address}"></div>
                    </div>

                    <div class="mb-3">
                        <label for="password" class="form-label">密碼</label>
                        <input type="password" class="form-control" id="password" th:field="*{password}" required />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>
                    </div>

                    <div class="mb-4">
                        <label for="confirmPassword" class="form-label">確認密碼</label>
                        <input type="password" class="form-control" id="confirmPassword" th:field="*{confirmPassword}" required />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('confirmPassword')}" th:errors="*{confirmPassword}"></div>
                    </div>

                    <div class="links-container">
                        <a th:href="@{/auth/login}" class="login-link">已有帳號，前往登入...</a>
                    </div>
                    <button type="submit" class="btn btn-primary w-100" id="submitBtn">註冊</button>
                    <div class="spinner-border text-primary d-none" id="loadingSpinner" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer th:replace="~{fragments/footer :: footer}"></footer>

    <!-- Scripts -->
    <script th:src="@{/webjars/jquery/3.6.0/jquery.min.js}"></script>
    <script th:src="@{/webjars/bootstrap/5.3.2/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/webjars/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js}"></script>
    <script th:src="@{/js/register.js}"></script> <!-- 將原有的 JavaScript 移到獨立的 JS 文件 -->
</body>
</html>