<!DOCTYPE html>
<html lang="zh-Hant" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register</title>
    <!-- 修改靜態資源引用 -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/client/Header.css}"/>
	<link rel="stylesheet" th:href="@{/css/client/Footer.css}"/>
	<link rel="stylesheet" th:href="@{/css/client/register.css}"/>
</head>
<body class="bg-light">
    <!-- Header -->
    <header th:replace="back-end/client/Header :: header"></header>


    <main>
        <div class="container">
            <div class="register-container">
                <h2 class="register-title">會員註冊</h2>
                <!-- 添加 Thymeleaf 表單處理 -->
                <form id="registerForm" th:action="@{/member/register}" method="post" th:object="${memberVO}">
                    <!-- 添加錯誤訊息顯示 -->
                  
                    
                    <div class="mb-3">
                        <label for="account" class="form-label">帳號</label>
                        <input type="text" class="form-control" id="account" th:field="*{account}" required />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('account')}" th:errors="*{account}"></div>
                    </div>

                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" th:field="*{email}" required />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
                    </div>

                    <div class="mb-3">
                        <label for="name" class="form-label">姓名</label>
                        <input type="text" class="form-control" id="name" th:field="*{name}" required />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
                    </div>

                    <div class="mb-3">
                        <label for="phone" class="form-label">手機</label>
                        <input type="tel" class="form-control" id="phone" th:field="*{phone}" pattern="[0-9]{10}" required />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></div>
                    </div>

                    <div class="mb-3">
                        <label for="bday" class="form-label">生日</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="bday" th:field="*{bday}" required />
                            <span class="input-group-text">
                                <i class="bi bi-calendar"></i>
                            </span>
                        </div>
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('bday')}" th:errors="*{bday}"></div>
                    </div>

                    <div class="mb-3">
                        <label for="addr" class="form-label">地址</label>
                        <input type="text" class="form-control" id="addr" th:field="*{addr}" required />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('addr')}" th:errors="*{addr}"></div>
                    </div>

                    <div class="mb-3">
                        <label for="password" class="form-label">密碼</label>
                        <input type="password" class="form-control" id="password" th:field="*{password}" required />
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('password')}" th:errors="*{password}" id="password.errors"></div>
                    </div>

                    <div class="mb-3">
						 <label for="confirmPassword" class="form-label">確認密碼</label>
						 <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required />
					</div>

                    <div class="links-container">
                        <a th:href="@{/member/login}" class="login-link">已有帳號，前往登入...</a>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">註冊</button>
                    <div class="spinner-border text-primary d-none" id="loadingSpinner" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer th:replace="back-end/client/Footer :: footer"></footer>

    <!-- Scripts -->
    <script type="text/javascript" th:src="@{/js/Header.js}" defer></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script>
document.querySelector('form').addEventListener('submit', function(e) {
    const password = document.querySelector('[name="password"]').value;
    const confirmPassword = document.querySelector('[name="confirmPassword"]').value;
    const confirmPasswordInput = document.querySelector('#confirmPassword');
    const confirmPasswordError = document.querySelector('#confirmPasswordError');
    
    if (password !== confirmPassword) {
        e.preventDefault();
        confirmPasswordInput.classList.add('is-invalid');
        confirmPasswordError.textContent = '密碼與確認密碼不符';
    }
});

$(document).ready(function () {
    // 初始化日期選擇器
    $("#bday").datepicker({
      format: "yyyy-mm-dd",
      autoclose: true,
      todayHighlight: true,
      language: "zh-TW",
    });

    // 點擊月曆 icon 時觸發日期選擇器
    $(".input-group-text").click(function () {
      $("#bday").datepicker("show");
    });
  });
</script>
</body>
</html>